<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coach Chris CRC Card</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#fcfcfc">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="CoachChrisCRC">
    
    <!-- App Icons -->
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/CoachChrisCRC/dbcard/refs/heads/main/CoachChrisCRC-AppIcon.png">
    
    <!-- Robust Manifest Data URI -->
    <link rel="manifest" href="data:application/manifest+json,{%22name%22:%22CoachChrisCRC%20Business%20Card%22,%22short_name%22:%22CoachChrisCRC%22,%22description%22:%22Professional%20Training%20Hub%20by%20Coach%20Chris%22,%22start_url%22:%22./%22,%22scope%22:%22./%22,%22display%22:%22standalone%22,%22orientation%22:%22portrait%22,%22background_color%22:%22%23ffffff%22,%22theme_color%22:%22%23ffffff%22,%22icons%22:[{%22src%22:%22https://raw.githubusercontent.com/CoachChrisCRC/dbcard/refs/heads/main/CoachChrisCRC-AppIcon.png%22,%22sizes%22:%22512x512%22,%22type%22:%22image/png%22,%22purpose%22:%22any%20maskable%22}]} " />

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,400;0,700;0,900;1,400;1,700&family=Rock+Salt&display=swap');
        
        :root { 
            --olive: #808a5c; 
            --bg-gradient-start: #ffffff;
            --bg-gradient-end: #f2f2f2;
            --card-bg-gradient: radial-gradient(circle at top left, rgba(128, 138, 92, 0.15) 0%, rgba(255, 255, 255, 0.98) 100%);
            --card-border: rgba(0, 0, 0, 0.1);
            --card-inner-glow: rgba(255, 255, 255, 0.8);
            --card-shadow: rgba(0, 0, 0, 0.15);
            --text-main: #09090b;
            --text-muted: #52525b;
            --text-sub: #27272a;
            --ring-bg: white;
            --track-bg: linear-gradient(to right, #ffffff, #f4f5ef, rgba(128, 138, 92, 0.15));
            --track-border: rgba(128, 138, 92, 0.2);
            --swipe-text: #52525b;
            --modal-bg: #ffffff;
            --footer-bg: rgba(0, 0, 0, 0.02);
            --status-green-bg: #dcfce7;
            --status-green-text: #15803d;
            --status-amber-bg: #fef3c7;
            --status-amber-text: #b45309;
            --status-red-bg: #fee2e2;
            --status-red-text: #b91c1c;
            --status-glow: rgba(0,0,0,0);
        }

        .dark {
            --bg-gradient-start: #18181b;
            --bg-gradient-end: #09090b;
            --card-bg-gradient: radial-gradient(circle at top left, rgba(128, 138, 92, 0.2) 0%, rgba(24, 24, 27, 0.85) 100%);
            --card-border: rgba(255, 255, 255, 0.1);
            --card-inner-glow: rgba(255, 255, 255, 0.05);
            --card-shadow: rgba(0, 0, 0, 0.5);
            --text-main: #ffffff;
            --text-muted: #a1a1aa;
            --text-sub: #d4d4d8;
            --ring-bg: #27272a;
            --track-bg: linear-gradient(to right, #27272a, #2c2e26, rgba(128, 138, 92, 0.25));
            --track-border: rgba(128, 138, 92, 0.3);
            --swipe-text: #a1a1aa;
            --modal-bg: #18181b;
            --footer-bg: rgba(255, 255, 255, 0.03);
            --status-green-bg: #064e3b;
            --status-green-text: #34d399;
            --status-amber-bg: #78350f;
            --status-amber-text: #fbbf24;
            --status-red-bg: #7f1d1d;
            --status-red-text: #f87171;
        }

        .status-green { --status-glow: rgba(21, 128, 61, 0.5); }
        .status-amber { --status-glow: rgba(180, 83, 9, 0.5); }
        .status-red { --status-glow: rgba(185, 28, 28, 0.5); }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--bg-gradient-end); 
            background-image: radial-gradient(circle at 50% 50%, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            color: var(--text-main); 
            overflow-x: hidden; 
            margin: 0; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            justify-content: flex-start; 
            min-height: 100svh;
            transition: background 0.3s ease;
            padding: 40px 20px;
        }

        .rock-salt { font-family: 'Rock Salt', cursive; }

        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a0a;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.6s cubic-bezier(0.65, 0, 0.35, 1), visibility 0.6s;
        }
        #splash-screen.fade-out { opacity: 0; visibility: hidden; }

        #transition-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-gradient-start);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9998;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        #transition-screen.active { display: flex; opacity: 1; }

        .card-perspective {
            perspective: 1500px;
            width: 100%;
            max-width: 380px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .card-container {
            background: var(--card-bg-gradient);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border-radius: 48px;
            padding: 40px 24px 0px 24px;
            box-shadow: 
                0 40px 80px -20px var(--card-shadow),
                0 0 0 1px var(--card-inner-glow) inset;
            border: 1px solid var(--card-border);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
            transform-style: preserve-3d;
            overflow: hidden;
        }

        .status-pill {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 5px 12px;
            border-radius: 12px;
            font-size: 9px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1), transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: translateY(-10px);
            border: 1px solid transparent;
            pointer-events: none;
        }
        .status-pill.visible { 
            opacity: 1; 
            transform: translateY(0);
            pointer-events: auto;
        }
        
        .status-pill.green { 
            background: rgba(220, 252, 231, 0.5); 
            color: var(--status-green-text); 
            border-color: rgba(21, 128, 61, 0.2);
        }
        .status-pill.amber { 
            background: rgba(254, 243, 199, 0.5); 
            color: var(--status-amber-text); 
            border-color: rgba(180, 83, 9, 0.2);
        }
        .status-pill.red { 
            background: rgba(254, 226, 226, 0.5); 
            color: var(--status-red-text); 
            border-color: rgba(185, 28, 28, 0.2);
        }

        .dark .status-pill.green { background: rgba(6, 78, 59, 0.3); border-color: rgba(52, 211, 153, 0.2); }
        .dark .status-pill.amber { background: rgba(120, 53, 15, 0.3); border-color: rgba(251, 191, 36, 0.2); }
        .dark .status-pill.red { background: rgba(127, 29, 29, 0.3); border-color: rgba(248, 113, 113, 0.2); }
        
        .status-dot { 
            width: 6px; 
            height: 6px; 
            border-radius: 50%; 
            background: currentColor; 
        }
        .status-dot.pulse { animation: status-glow 2s infinite ease-in-out; }
        @keyframes status-glow { 
            0% { opacity: 1; transform: scale(1); box-shadow: 0 0 0 0 currentColor; } 
            50% { opacity: 0.6; transform: scale(1.1); box-shadow: 0 0 6px 1px currentColor; } 
            100% { opacity: 1; transform: scale(1); box-shadow: 0 0 0 0 currentColor; } 
        }

        .avatar-ring { 
            position: relative; 
            padding: 8px; 
            background: var(--ring-bg); 
            border-radius: 50%; 
            margin-bottom: 20px; 
            perspective: 1000px;
            transition: box-shadow 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1), 0 0 0 0px var(--status-glow);
            user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
        }
        
        .avatar-ring.glow-active {
            animation: ring-pulse 4s infinite ease-in-out;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1), 0 0 5px 1px var(--status-glow);
        }

        @keyframes ring-pulse {
            0%, 100% { box-shadow: 0 10px 30px rgba(0,0,0,0.1), 0 0 5px 1px var(--status-glow); }
            50% { box-shadow: 0 10px 30px rgba(0,0,0,0.1), 0 0 35px 8px var(--status-glow); }
        }

        .avatar-flipper { width: 130px; height: 130px; position: relative; transform-style: preserve-3d; transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1); pointer-events: none; }
        .avatar-flipper img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; position: absolute; backface-visibility: hidden; border: 4px solid var(--ring-bg); }

        .swipe-track { 
            position: relative; 
            width: 100%; 
            height: 68px; 
            background: var(--track-bg); 
            border-radius: 99px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            overflow: hidden; 
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.05);
            border: 1px solid var(--track-border);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        .swipe-handle { 
            position: absolute; 
            left: 6px; 
            width: 56px; 
            height: 56px; 
            background: var(--olive); 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            color: white; 
            cursor: grab; 
            z-index: 2; 
            box-shadow: 0 4px 15px rgba(128, 138, 92, 0.4); 
            touch-action: none; 
        }
        .swipe-text { font-size: 10px; font-weight: 800; text-transform: uppercase; letter-spacing: 0.15em; color: var(--swipe-text); pointer-events: none; }

        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); z-index: 9500; align-items: center; justify-content: center; padding: 24px; opacity: 0; transition: opacity 0.3s ease; }
        .modal-overlay.active { display: flex; opacity: 1; }
        
        .modal-content { 
            background: var(--modal-bg); 
            border: 1px solid var(--card-border);
            border-radius: 40px; 
            width: 100%; 
            max-width: 380px; 
            padding: 40px 24px; 
            transform: scale(0.9); 
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); 
            box-shadow: 0 30px 60px rgba(0,0,0,0.3);
            position: relative;
        }
        .modal-overlay.active .modal-content { transform: scale(1); }
        
        .qr-logo-overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90px; height: 90px; background: white; padding: 6px; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .qr-logo-overlay img { width: 100%; height: 100%; border-radius: 14px; object-fit: cover; }

        .fab-container {
            position: fixed;
            top: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            z-index: 9000;
        }
        .fab {
            width: 50px;
            height: 50px;
            background: var(--ring-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: var(--text-main);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid var(--olive);
            position: relative;
        }
        .fab:active { transform: scale(0.9); }

        #fab-install {
            background: var(--olive);
            color: white;
            border-color: white;
            animation: bounce-in 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .dismiss-x {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 20px;
            height: 20px;
            background: var(--text-main);
            color: var(--ring-bg);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        @keyframes bounce-in {
            0% { transform: scale(0) rotate(-45deg); opacity: 0; }
            70% { transform: scale(1.1) rotate(5deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .footer-connect {
            width: calc(100% + 48px);
            margin-left: -24px;
            margin-right: -24px;
            background: var(--footer-bg);
            padding: 20px 24px;
            margin-top: 32px;
            border-top: 1px solid var(--card-border);
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .connect-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            background: var(--ring-bg);
            border: 1px solid var(--card-border);
            border-radius: 14px;
            flex: 1;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .connect-btn:active { transform: scale(0.95); }

        .ekg-path { stroke: var(--olive); stroke-width: 2; fill: none; stroke-dasharray: 500; stroke-dashoffset: 500; animation: ekg-draw 1.5s linear forwards; }
        @keyframes ekg-draw { 0% { stroke-dashoffset: 500; opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { stroke-dashoffset: 0; opacity: 0; } }

        .line-loader-container {
            width: 140px;
            height: 2px;
            background: rgba(128, 128, 128, 0.2);
            border-radius: 2px;
            overflow: hidden;
            position: relative;
        }
        .line-loader-bar {
            width: 40%;
            height: 100%;
            background: var(--olive);
            position: absolute;
            animation: line-slide 1.2s cubic-bezier(0.65, 0, 0.35, 1) infinite;
        }
        @keyframes line-slide {
            0% { left: -40%; width: 40%; }
            50% { width: 60%; }
            100% { left: 100%; width: 40%; }
        }

        .testimonial-slider {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            scrollbar-width: none;
            -ms-overflow-style: none;
            gap: 20px;
            margin-top: 20px;
        }
        .testimonial-slider::-webkit-scrollbar { display: none; }
        
        .testimonial-card {
            min-width: 100%;
            scroll-snap-align: center;
            text-align: left;
        }
        
        .testimonial-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--text-muted);
            opacity: 0.3;
            transition: all 0.3s ease;
        }
        .testimonial-dot.active {
            opacity: 1;
            background: var(--olive);
            width: 16px;
            border-radius: 10px;
        }

        #pin-input-field {
            background: var(--footer-bg);
            border: 2px solid var(--card-border);
            color: var(--text-main);
            text-align: center;
            font-size: 24px;
            letter-spacing: 0.5em;
            width: 100%;
            padding: 16px;
            border-radius: 16px;
            outline: none;
        }
        #pin-input-field:focus { border-color: var(--olive); }
    </style>
</head>
<body id="app-body">

    <!-- Splash Screen -->
    <div id="splash-screen">
        <div class="flex flex-col items-center px-4">
            <div class="flex items-center justify-center gap-4 mb-10">
                <div class="w-16 h-16 rounded-full overflow-hidden bg-white/10 p-1 border border-white/20">
                    <img src="https://raw.githubusercontent.com/CoachChrisCRC/dbcard/refs/heads/main/UNCNVNTNL-Logo.png" class="w-full h-full object-contain">
                </div>
                <div class="relative w-36 h-36 rounded-full border-4 border-[#808a5c] overflow-hidden shadow-[0_0_40px_rgba(128, 138, 92, 0.4)]">
                    <img src="https://raw.githubusercontent.com/CoachChrisCRC/dbcard/refs/heads/main/CoachChrisCRC-AppIcon.png" class="w-full h-full object-cover">
                </div>
                <div class="w-16 h-16 rounded-full overflow-hidden bg-white/10 p-1 border border-white/20">
                    <img src="https://raw.githubusercontent.com/CoachChrisCRC/dbcard/refs/heads/main/CRC-Logo.png" class="w-full h-full object-contain">
                </div>
            </div>
            <h1 class="text-white text-xl font-black uppercase tracking-[0.3em] mb-4">Coach Chris <span class="text-[#808a5c]">CRC</span></h1>
            <div class="w-48 h-10 relative overflow-hidden">
                <svg class="w-full h-full" viewBox="0 0 180 40">
                    <path class="ekg-path" d="M0,20 L40,20 L45,10 L55,30 L60,20 L90,20 L95,0 L105,40 L110,20 L180,20"></path>
                </svg>
            </div>
        </div>
    </div>

    <!-- Transition Screen -->
    <div id="transition-screen">
        <div class="flex flex-col items-center">
            <div class="line-loader-container">
                <div class="line-loader-bar"></div>
            </div>
        </div>
    </div>

    <!-- QR Modal -->
    <div id="qr-modal" class="modal-overlay">
        <div class="modal-content text-center">
            <h2 class="rock-salt font-bold text-xl text-main uppercase tracking-tight mb-8">COACH CHRIS</h2>
            <div id="qrcode-wrapper" class="relative inline-block mb-8 p-4 bg-white rounded-3xl">
                <div id="qrcode"></div>
                <div class="qr-logo-overlay">
                    <img src="https://raw.githubusercontent.com/CoachChrisCRC/dbcard/refs/heads/main/CoachChrisCRC-AppIcon.png">
                </div>
            </div>
            <div class="flex flex-col items-center mb-8">
                <h3 class="text-main font-black text-2xl uppercase tracking-tight mb-1">Chris Hedley</h3>
                <p class="text-muted text-xs font-bold uppercase tracking-widest mb-4">Online Coach & PT</p>
                <div class="flex flex-col gap-1 text-[10px] font-black uppercase tracking-[0.2em] text-muted mb-6 italic">
                    <span>Circular Roots Coaching</span>
                    <span>TRAIN UNCNVNTNL</span>
                </div>
                <p class="text-[#808a5c] text-xs font-black uppercase tracking-[0.3em]">#FITTER #STRONGER #BETTER</p>
            </div>
            <button id="close-qr" class="w-full bg-zinc-900 dark:bg-zinc-100 text-zinc-100 dark:text-zinc-900 py-5 rounded-2xl text-xs font-black uppercase tracking-widest active:scale-95 transition-transform">Close</button>
        </div>
    </div>

    <!-- PIN Modal -->
    <div id="pin-modal" class="modal-overlay">
        <div class="modal-content text-center">
            <div class="flex items-center justify-center mb-6">
                <i data-lucide="lock" class="w-8 h-8 text-[#808a5c]"></i>
            </div>
            <h4 class="text-xs font-black uppercase tracking-[0.3em] text-main mb-6">Enter Access PIN</h4>
            <input type="password" id="pin-input-field" maxlength="5" placeholder="•••••" inputmode="numeric">
            <p id="pin-error" class="text-[10px] font-bold text-red-500 uppercase mt-4 opacity-0 transition-opacity">Incorrect PIN</p>
            <button id="close-pin" class="w-full mt-8 bg-zinc-200 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 py-4 rounded-2xl text-[10px] font-black uppercase tracking-widest active:scale-95 transition-transform">Cancel</button>
        </div>
    </div>

    <!-- Testimonials Modal -->
    <div id="testimonials-modal" class="modal-overlay">
        <div class="modal-content text-center">
            <div class="flex items-center justify-center gap-2 mb-6">
                <i data-lucide="award" class="w-5 h-5 text-[#808a5c]"></i>
                <h4 class="text-xs font-black uppercase tracking-[0.3em] text-main">Success Stories</h4>
            </div>
            
            <div class="testimonial-slider" id="testimonial-slider">
                <div class="testimonial-card">
                    <div class="mb-3">
                        <span class="text-[8px] font-black uppercase tracking-widest text-[#808a5c] block mb-1">Top Achievement:</span>
                        <h5 class="text-[11px] font-bold text-main leading-tight">Mastered Ring Muscle-Ups & Exceeded Potential</h5>
                    </div>
                    <p class="text-[12px] italic leading-relaxed text-main font-medium mb-4">"Chris genuinely wants you to succeed. He has a unique skill for identifying obvious improvements that create huge results, helping me achieve things I didn't think possible."</p>
                    <div class="flex flex-col">
                        <span class="text-[10px] font-black uppercase tracking-wider text-main">Paul "Spider" Chan</span>
                        <span class="text-[8px] font-bold uppercase tracking-widest text-muted">Business & Training Partner</span>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="mb-3">
                        <span class="text-[8px] font-black uppercase tracking-widest text-[#808a5c] block mb-1">Top Achievement:</span>
                        <h5 class="text-[11px] font-bold text-main leading-tight">Major Strength Gains & Technique Improvement</h5>
                    </div>
                    <p class="text-[12px] italic leading-relaxed text-main font-medium mb-4">"I can lift way more now than I ever thought I’d be able to! Chris keeps every session engaging and encourages me to challenge myself constantly."</p>
                    <div class="flex flex-col">
                        <span class="text-[10px] font-black uppercase tracking-wider text-main">Alana Giuliani</span>
                        <span class="text-[8px] font-bold uppercase tracking-widest text-muted">Personal Training Client</span>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="mb-3">
                        <span class="text-[8px] font-black uppercase tracking-widest text-[#808a5c] block mb-1">Top Achievement:</span>
                        <h5 class="text-[11px] font-bold text-main leading-tight">Consistently Challenged through Varied Training</h5>
                    </div>
                    <p class="text-[12px] italic leading-relaxed text-main font-medium mb-4">"Chris provides challenging and varied sessions. He is always willing to go the extra mile to help with specific areas you need to work on."</p>
                    <div class="flex flex-col">
                        <span class="text-[10px] font-black uppercase tracking-wider text-main">Louise Baker</span>
                        <span class="text-[8px] font-bold uppercase tracking-widest text-muted">Dedicated Client</span>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="mb-3">
                        <span class="text-[8px] font-black uppercase tracking-widest text-[#808a5c] block mb-1">Top Achievement:</span>
                        <h5 class="text-[11px] font-bold text-main leading-tight">Transformation via Personalized Programming</h5>
                    </div>
                    <p class="text-[12px] italic leading-relaxed text-main font-medium mb-4">"I'm over the moon with my results. Chris is an excellent motivator; he knows your strengths and weaknesses and structures sessions with that knowledge."</p>
                    <div class="flex flex-col">
                        <span class="text-[10px] font-black uppercase tracking-wider text-main">Suzanne Thompson</span>
                        <span class="text-[8px] font-bold uppercase tracking-widest text-muted">PT & Custom Programming</span>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="mb-3">
                        <span class="text-[8px] font-black uppercase tracking-widest text-[#808a5c] block mb-1">Top Achievement:</span>
                        <h5 class="text-[11px] font-bold text-main leading-tight">High Engagement & Positive Class Atmosphere</h5>
                    </div>
                    <p class="text-[12px] italic leading-relaxed text-main font-medium mb-4">"Always encouraging and happy. Everyone enjoys the classes every time—his energy is infectious and keeps us all coming back."</p>
                    <div class="flex flex-col">
                        <span class="text-[10px] font-black uppercase tracking-wider text-main">Kris McGough</span>
                        <span class="text-[8px] font-bold uppercase tracking-widest text-muted">Class Participant</span>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="mb-3">
                        <span class="text-[8px] font-black uppercase tracking-widest text-[#808a5c] block mb-1">Top Achievement:</span>
                        <h5 class="text-[11px] font-bold text-main leading-tight">Mastered Lifting Technique & Pushed Limits</h5>
                    </div>
                    <p class="text-[12px] italic leading-relaxed text-main font-medium mb-4">"Chris taught me great technique for lifting and pushed me harder than I thought I could go. Highly recommended for anyone ready to up their game."</p>
                    <div class="flex flex-col">
                        <span class="text-[10px] font-black uppercase tracking-wider text-main">Vicky Jackson</span>
                        <span class="text-[8px] font-bold uppercase tracking-widest text-muted">Personal Training Client</span>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="mb-3">
                        <span class="text-[8px] font-black uppercase tracking-widest text-[#808a5c] block mb-1">Top Achievement:</span>
                        <h5 class="text-[11px] font-bold text-main leading-tight">Optimized Running Form & Functional Balance</h5>
                    </div>
                    <p class="text-[12px] italic leading-relaxed text-main font-medium mb-4">"Chris quickly identified how strength training could improve my running technique, balance, and posture. It ain't an easy ride—but well worth the trip!"</p>
                    <div class="flex flex-col">
                        <span class="text-[10px] font-black uppercase tracking-wider text-main">Lisa Watson</span>
                        <span class="text-[8px] font-bold uppercase tracking-widest text-muted">Running & Strength Client</span>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="mb-3">
                        <span class="text-[8px] font-black uppercase tracking-widest text-[#808a5c] block mb-1">Top Achievement:</span>
                        <h5 class="text-[11px] font-bold text-main leading-tight">Holistic Goal-Driven Wellbeing Success</h5>
                    </div>
                    <p class="text-[12px] italic leading-relaxed text-main font-medium mb-4">"Chris is the living embodiment of positive goal-driven wellbeing. He knows exactly how to help you reach your goals if you invest the time."</p>
                    <div class="flex flex-col">
                        <span class="text-[10px] font-black uppercase tracking-wider text-main">Kelly Coats</span>
                        <span class="text-[8px] font-bold uppercase tracking-widest text-muted">Wellness & Goal-Setting</span>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-center gap-1 mt-6" id="testimonial-dots">
                <div class="testimonial-dot active"></div>
                <div class="testimonial-dot"></div>
                <div class="testimonial-dot"></div>
                <div class="testimonial-dot"></div>
                <div class="testimonial-dot"></div>
                <div class="testimonial-dot"></div>
                <div class="testimonial-dot"></div>
                <div class="testimonial-dot"></div>
            </div>

            <button id="close-testimonials" class="w-full mt-8 bg-zinc-900 dark:bg-zinc-100 text-zinc-100 dark:text-zinc-900 py-5 rounded-2xl text-xs font-black uppercase tracking-widest active:scale-95 transition-transform">Close</button>
        </div>
    </div>

    <!-- Floating Actions -->
    <div class="fab-container">
        <div class="fab" id="theme-toggle" title="Toggle Theme">
            <i data-lucide="moon" class="w-5 h-5 block dark:hidden"></i>
            <i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
        </div>
        <div class="fab hidden" id="fab-install" title="Install App">
            <i data-lucide="download" class="w-5 h-5"></i>
            <div id="dismiss-install" class="dismiss-x" title="Dismiss">
                <i data-lucide="x" class="w-2.5 h-2.5"></i>
            </div>
        </div>
    </div>

    <!-- Main Card -->
    <div class="card-perspective">
        <div id="main-card" class="card-container opacity-0 translate-y-12 transition-all duration-1000 ease-out">
            
            <!-- Dynamic Status Badge -->
            <div class="w-full flex justify-center mb-6 px-1 h-6">
                <div id="status-badge" class="status-pill">
                    <div class="status-dot pulse"></div>
                    <span id="status-text">Syncing...</span>
                </div>
            </div>

            <!-- Avatar -->
            <div class="avatar-ring" id="avatar-ring">
                <div class="avatar-flipper" id="avatar-flipper">
                    <img id="avatar-front" src="https://raw.githubusercontent.com/CoachChrisCRC/dbcard/refs/heads/main/CRC-Logo.png" alt="Logo Front">
                    <img id="avatar-back" src="https://raw.githubusercontent.com/CoachChrisCRC/dbcard/refs/heads/main/UNCNVNTNL-Logo.png" alt="Logo Back" style="transform: rotateY(180deg);">
                </div>
            </div>

            <h2 class="rock-salt font-bold text-2xl text-main uppercase tracking-tight mb-3">COACH CHRIS</h2>
            <h3 class="text-main font-black text-2xl uppercase tracking-tighter mb-1">Chris Hedley</h3>
            <p class="text-muted text-[10px] font-bold uppercase tracking-[0.25em] mb-4">Online Coach & PT</p>
            
            <div class="flex flex-col gap-1 text-[10px] font-black uppercase tracking-[0.2em] text-sub mb-8 italic">
                <span>Circular Roots Coaching</span>
                <span>TRAIN UNCNVNTNL</span>
            </div>

            <div class="flex flex-col w-full gap-4">
                <div class="grid grid-cols-2 gap-3 w-full">
                    <button id="open-qr" class="flex items-center justify-center gap-2 bg-[#808a5c] text-white py-4 rounded-2xl shadow-md active:scale-[0.96] active:bg-[#6d764e] transition-all">
                        <i data-lucide="qr-code" class="w-4 h-4"></i>
                        <span class="text-[9px] font-black uppercase tracking-widest">Share Card</span>
                    </button>
                    <button id="save-vcard" class="flex items-center justify-center gap-2 bg-zinc-900 dark:bg-zinc-100 text-zinc-100 dark:text-zinc-900 py-4 rounded-2xl shadow-sm active:scale-[0.96] transition-all">
                        <i data-lucide="user-plus" class="w-4 h-4"></i>
                        <span class="text-[9px] font-black uppercase tracking-widest">Save Contact</span>
                    </button>
                    <button id="open-testimonials" class="col-span-2 flex items-center justify-center gap-2 bg-white/50 dark:bg-zinc-800/50 text-zinc-900 dark:text-zinc-100 py-4 rounded-2xl border border-zinc-200 dark:border-zinc-700 active:scale-[0.96] transition-all">
                        <i data-lucide="star" class="w-4 h-4 text-[#808a5c]"></i>
                        <span class="text-[9px] font-black uppercase tracking-widest">Success Stories</span>
                    </button>
                    <button id="open-course" class="col-span-2 flex items-center justify-center gap-2 bg-white/50 dark:bg-zinc-800/50 text-zinc-900 dark:text-zinc-100 py-4 rounded-2xl border-2 border-[#808a5c] active:scale-[0.96] transition-all">
                        <i data-lucide="flame" class="w-4 h-4 text-[#808a5c]"></i>
                        <span class="text-[9px] font-black uppercase tracking-widest">Get my Free 14 Day Fundamentals Course</span>
                    </button>
                </div>

                <div class="swipe-track">
                    <div class="swipe-handle" id="swipe-handle">
                        <i data-lucide="chevron-right" class="w-6 h-6"></i>
                    </div>
                    <span class="swipe-text" id="swipe-text">Swipe for More</span>
                </div>
            </div>

            <div class="footer-connect">
                <div class="flex gap-2.5">
                    <div data-url="https://wa.me/447925116794" class="connect-btn quick-connect" title="WhatsApp">
                        <svg class="w-4 h-4 text-[#808a5c]" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                        </svg>
                    </div>
                    <div data-url="mailto:Circularrootscoaching@gmail.com" class="connect-btn quick-connect" title="Email">
                        <i data-lucide="mail" class="w-4 h-4 text-[#808a5c]"></i>
                    </div>
                    <div data-url="https://instagram.com/chris.h_crc" class="connect-btn quick-connect" title="Instagram">
                        <i data-lucide="instagram" class="w-4 h-4 text-[#808a5c]"></i>
                    </div>
                    <div data-url="https://facebook.com/circularrootscoaching" class="connect-btn quick-connect" title="Facebook">
                        <i data-lucide="facebook" class="w-4 h-4 text-[#808a5c]"></i>
                    </div>
                </div>
                
                <div class="mt-2 text-center">
                    <p class="text-[#808a5c] text-[8px] font-black uppercase tracking-[0.4em]">#FITTER #STRONGER #BETTER</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const EXTERNAL_URL = "https://coachchriscrc.carrd.co";
        const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQXLZhY6w7aWwg5ZjFGoh7T-0xx3WownV46HBKC1iMNqxiOAW8LfbcfqnoXo8YznaaerjeG1_R6vb7c/pub?gid=0&single=true&output=csv";
        
        // Option 1 URL: Redirection directly to the editable sheet
        const HIDDEN_MENU_URL = "https://docs.google.com/spreadsheets/d/1Z0_Tu60EA5kuibQ_3hnAUem2fwT843afJvQ0FICxYKs/edit";
        
        const SECRET_PIN = "07320";

        const CONTACT_INFO = {
            firstName: "Chris",
            lastName: "Hedley",
            suffix: "(Coach Chris)",
            phone: "+447925116794",
            email: "Circularrootscoaching@gmail.com",
            web: "https://coachchriscrc.carrd.co",
            whatsapp: "https://wa.me/447925116794",
            title: "Online Coach & PT",
            org: "Circular Roots Coaching; TRAIN UNCNVNTNL"
        };

        const LOGOS = [
            "https://raw.githubusercontent.com/CoachChrisCRC/dbcard/refs/heads/main/CRC-Logo.png",
            "https://raw.githubusercontent.com/CoachChrisCRC/dbcard/refs/heads/main/UNCNVNTNL-Logo.png",
            "https://raw.githubusercontent.com/CoachChrisCRC/dbcard/refs/heads/main/CoachChrisCRC-AppIcon.png"
        ];

        let currentStatusData = { msg: "", color: "" };

        async function updateLiveStatus() {
            try {
                const response = await fetch(SHEET_URL + '&cache=' + Date.now());
                if (!response.ok) throw new Error('Sheet not found');
                
                const csvData = await response.text();
                const rows = csvData.split('\n');
                
                if (rows.length < 2) return;

                const cols = rows[1].split(',');
                const message = cols[0] ? cols[0].replace(/"/g, '').trim() : "";
                const color = cols[1] ? cols[1].replace(/"/g, '').trim().toLowerCase() : "";

                currentStatusData = { msg: message, color: color };
                
                if (document.getElementById('splash-screen').classList.contains('fade-out')) {
                    applyStatus(message, color);
                }
            } catch (error) {
                console.error("Status Sync Error:", error);
            }
        }

        function applyStatus(msg, color) {
            const badge = document.getElementById('status-badge');
            const textEl = document.getElementById('status-text');
            const body = document.getElementById('app-body');
            const avatarRing = document.getElementById('avatar-ring');
            
            if (!msg || msg === "") {
                badge.classList.remove('visible');
                avatarRing.classList.remove('glow-active');
                body.classList.remove('status-green', 'status-amber', 'status-red');
                return;
            }

            textEl.innerText = msg;
            badge.classList.remove('green', 'amber', 'red');
            if (color) badge.classList.add(color);
            
            body.classList.remove('status-green', 'status-amber', 'status-red');
            if (color) body.classList.add(`status-${color}`);

            requestAnimationFrame(() => {
                badge.classList.add('visible');
                if (color) avatarRing.classList.add('glow-active');
            });
        }

        const splash = document.getElementById('splash-screen');
        const transitionScreen = document.getElementById('transition-screen');
        const mainCard = document.getElementById('main-card');
        const qrModal = document.getElementById('qr-modal');
        const testimonialsModal = document.getElementById('testimonials-modal');
        const pinModal = document.getElementById('pin-modal');
        const pinInput = document.getElementById('pin-input-field');
        const pinError = document.getElementById('pin-error');
        
        const openQrBtn = document.getElementById('open-qr');
        const openTestimonialsBtn = document.getElementById('open-testimonials');
        const openCourseBtn = document.getElementById('open-course');
        const saveVcardBtn = document.getElementById('save-vcard');
        const closeQrBtn = document.getElementById('close-qr');
        const closeTestimonialsBtn = document.getElementById('close-testimonials');
        const closePinBtn = document.getElementById('close-pin');
        
        const avatarRing = document.getElementById('avatar-ring');
        const handle = document.getElementById('swipe-handle');
        const swipeText = document.getElementById('swipe-text');
        const flipper = document.getElementById('avatar-flipper');
        const frontImg = document.getElementById('avatar-front');
        const fabInstall = document.getElementById('fab-install');
        const dismissInstall = document.getElementById('dismiss-install');
        const themeToggle = document.getElementById('theme-toggle');
        const slider = document.getElementById('testimonial-slider');

        // Hidden Menu Logic (Long press 3s on avatar)
        let longPressTimer;
        const avatarTouchStart = (e) => {
            longPressTimer = setTimeout(() => {
                pinModal.classList.add('active');
                pinInput.focus();
            }, 3000);
        };
        const avatarTouchEnd = () => clearTimeout(longPressTimer);

        avatarRing.addEventListener('touchstart', avatarTouchStart, { passive: true });
        avatarRing.addEventListener('touchend', avatarTouchEnd);
        avatarRing.addEventListener('mousedown', avatarTouchStart);
        avatarRing.addEventListener('mouseup', avatarTouchEnd);
        avatarRing.addEventListener('mouseleave', avatarTouchEnd);

        pinInput.addEventListener('input', (e) => {
            const val = e.target.value;
            pinError.style.opacity = '0';
            if (val.length === 5) {
                if (val === SECRET_PIN) {
                    pinModal.classList.remove('active');
                    pinInput.value = '';
                    
                    // Option 1: Full Redirect to the sheet URL
                    window.location.href = HIDDEN_MENU_URL;
                } else {
                    pinError.style.opacity = '1';
                    setTimeout(() => {
                        pinInput.value = '';
                    }, 500);
                }
            }
        });

        closePinBtn.addEventListener('click', () => {
            pinModal.classList.remove('active');
            pinInput.value = '';
            pinError.style.opacity = '0';
        });

        // PWA Install
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            if (!sessionStorage.getItem('installDismissed')) {
                fabInstall.classList.remove('hidden');
            }
        });

        fabInstall.addEventListener('click', async (e) => {
            if (e.target.closest('#dismiss-install')) return; 
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') fabInstall.classList.add('hidden');
                deferredPrompt = null;
            }
        });

        dismissInstall.addEventListener('click', (e) => {
            e.stopPropagation();
            fabInstall.classList.add('hidden');
            sessionStorage.setItem('installDismissed', 'true');
        });

        function setTheme(isDark) {
            if (isDark) document.documentElement.classList.add('dark');
            else document.documentElement.classList.remove('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) setTheme(savedTheme === 'dark');
        else if (window.matchMedia('(prefers-color-scheme: dark)').matches) setTheme(true);

        themeToggle.addEventListener('click', () => setTheme(!document.documentElement.classList.contains('dark')));

        async function runAvatarSequence() {
            setTimeout(() => flipper.style.transform = 'rotateY(180deg)', 800);
            setTimeout(() => {
                frontImg.src = LOGOS[2];
                flipper.style.transform = 'rotateY(360deg)';
                setTimeout(() => applyStatus(currentStatusData.msg, currentStatusData.color), 800);
            }, 1800);
        }

        function revealDashboard() {
            splash.classList.add('fade-out');
            setTimeout(() => {
                mainCard.classList.remove('opacity-0', 'translate-y-12');
                runAvatarSequence();
            }, 300);
        }

        function triggerNavigation(url, withLoading = true) {
            if (withLoading) {
                transitionScreen.classList.add('active');
                setTimeout(() => window.location.href = url, 100);
            } else {
                window.location.href = url;
            }
        }

        window.onpageshow = function(event) {
            if (event.persisted) {
                transitionScreen.classList.remove('active');
                handle.style.transition = 'transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
                handle.style.transform = `translateX(0px)`;
                swipeText.style.opacity = 1;
                isDragging = false;
            }
        };

        window.addEventListener('load', () => {
            lucide.createIcons();
            updateLiveStatus();
            setTimeout(revealDashboard, 1500);
            setInterval(updateLiveStatus, 30000);
            document.querySelectorAll('.quick-connect').forEach(btn => {
                btn.addEventListener('click', () => triggerNavigation(btn.getAttribute('data-url'), false));
            });
        });

        slider.addEventListener('scroll', () => {
            const dots = document.querySelectorAll('.testimonial-dot');
            const index = Math.round(slider.scrollLeft / slider.offsetWidth);
            dots.forEach((dot, i) => dot.classList.toggle('active', i === index));
        });

        saveVcardBtn.addEventListener('click', () => {
            const vcard = [
                "BEGIN:VCARD", "VERSION:3.0",
                `FN:${CONTACT_INFO.firstName} ${CONTACT_INFO.lastName}`,
                `ORG:${CONTACT_INFO.org}`, `TEL;TYPE=CELL:${CONTACT_INFO.phone}`,
                `EMAIL:${CONTACT_INFO.email}`, `URL:${CONTACT_INFO.web}`, "END:VCARD"
            ].join("\n");
            const blob = new Blob([vcard], { type: "text/vcard" });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url; a.download = 'CoachChris.vcf'; a.click();
        });

        let isDragging = false;
        let startX = 0;
        function onStart(e) { isDragging = true; startX = (e.type === 'touchstart') ? e.touches[0].clientX : e.clientX; handle.style.transition = 'none'; }
        function onMove(e) {
            if (!isDragging) return;
            const currentX = (e.type === 'touchmove') ? e.touches[0].clientX : e.clientX;
            let delta = currentX - startX;
            const trackWidth = document.querySelector('.swipe-track').offsetWidth;
            const maxDelta = trackWidth - 56 - 12;
            delta = Math.max(0, Math.min(delta, maxDelta));
            handle.style.transform = `translateX(${delta}px)`;
            swipeText.style.opacity = 1 - (delta / maxDelta);
        }
        function onEnd() {
            if (!isDragging) return;
            isDragging = false;
            const matrix = new WebKitCSSMatrix(window.getComputedStyle(handle).transform);
            const maxDelta = document.querySelector('.swipe-track').offsetWidth - 56 - 12;
            if (matrix.m41 >= maxDelta * 0.9) {
                handle.style.transform = `translateX(${maxDelta}px)`;
                triggerNavigation(EXTERNAL_URL, true); 
            } else {
                handle.style.transition = 'transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
                handle.style.transform = `translateX(0px)`;
                swipeText.style.opacity = 1;
            }
        }

        handle.addEventListener('mousedown', onStart);
        handle.addEventListener('touchstart', onStart, { passive: true });
        window.addEventListener('mousemove', onMove);
        window.addEventListener('touchmove', onMove, { passive: false });
        window.addEventListener('mouseup', onEnd);
        window.addEventListener('touchend', onEnd);

        openQrBtn.addEventListener('click', () => qrModal.classList.add('active'));
        closeQrBtn.addEventListener('click', () => qrModal.classList.remove('active'));
        openTestimonialsBtn.addEventListener('click', () => testimonialsModal.classList.add('active'));
        closeTestimonialsBtn.addEventListener('click', () => testimonialsModal.classList.remove('active'));
        openCourseBtn.addEventListener('click', () => triggerNavigation(EXTERNAL_URL, true));

        new QRCode(document.getElementById("qrcode"), {
            text: window.location.href, width: 240, height: 240, colorDark : "#000000", colorLight : "#ffffff", correctLevel : QRCode.CorrectLevel.H
        });
    </script>
</body>
</html>

