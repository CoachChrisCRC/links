<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coach Chris CRC</title>
    <meta name="theme-color" content="#121412">
    
    <!-- Inline Manifest using Data URI -->
    <link rel="manifest" href='data:application/json,{"name":"Coach Chris CRC","short_name":"ChrisCRC","start_url":"index.html","display":"standalone","background_color":"#121412","theme_color":"#808a5c","icons":[{"src":"https://via.placeholder.com/192/808a5c/ffffff?text=CRC","sizes":"192x192","type":"image/png"},{"src":"https://via.placeholder.com/512/808a5c/ffffff?text=Coach+Chris","sizes":"512x512","type":"image/png"}]}'>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        :root { --olive: #808a5c; --bg: #121412; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: #fff; overflow: hidden; margin: 0; display: flex; align-items: center; justify-content: center; height: 100vh; }
        .bar-container { width: 280px; height: 4px; background: rgba(255, 255, 255, 0.05); border-radius: 10px; overflow: hidden; margin-top: 2rem; border: 1px solid rgba(128, 138, 92, 0.2); }
        #progress-bar { width: 0%; height: 100%; transition: width 0.1s ease-out; background: linear-gradient(135deg, var(--olive) 0%, #556b2f 100%); box-shadow: 0 0 15px rgba(128, 138, 92, 0.5); }
        .icon-container { position: relative; display: flex; justify-content: center; align-items: center; background: rgba(128, 138, 92, 0.05); border-radius: 50%; border: 1px solid rgba(128, 138, 92, 0.1); width: 140px; height: 140px; overflow: hidden; }
        .heartrate-path { stroke-dasharray: 120; stroke-dashoffset: 120; animation: move-right 1.4s linear infinite; }
        @keyframes move-right { 0% { stroke-dashoffset: 120; } 100% { stroke-dashoffset: -120; } }
        #install-btn { display: none; margin-top: 1rem; font-size: 10px; border: 1px solid var(--olive); padding: 5px 15px; border-radius: 20px; color: var(--olive); letter-spacing: 2px; }
    </style>
</head>
<body>

    <div class="flex flex-col items-center text-center p-6">
        <div class="icon-container mb-10">
            <svg width="140" height="140" viewBox="0 0 24 24" fill="none" stroke="#808a5c" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M0 12h2l1.5-4 1.5 8 2-14 2.5 20 2-10 2 4h10.5" opacity="0.1"></path>
                <path d="M0 12h2l1.5-4 1.5 8 2-14 2.5 20 2-10 2 4h10.5" class="heartrate-path"></path>
            </svg>
        </div>

        <h1 class="text-4xl md:text-5xl font-black uppercase tracking-tighter mb-2">
            Coach Chris <span style="color:var(--olive)">CRC</span>
        </h1>
        
        <div class="flex items-center space-x-2">
            <span class="h-[1px] w-4 bg-[#808a5c]"></span>
            <p class="text-gray-500 text-[10px] uppercase tracking-[0.3em] font-bold">FITTER. STRONGER. BETTER.</p>
            <span class="h-[1px] w-4 bg-[#808a5c]"></span>
        </div>

        <div class="bar-container">
            <div id="progress-bar"></div>
        </div>
        
        <div id="status-text" class="text-[10px] text-gray-500 mt-6 font-mono uppercase tracking-widest opacity-70">Initializing...</div>
        
        <button id="install-btn">INSTALL APP</button>
    </div>

    <script>
        // Inline Service Worker Generation
        const swCode = `
            const CACHE = 'chris-crc-v1';
            self.addEventListener('install', e => e.waitUntil(caches.open(CACHE).then(c => c.add('index.html'))));
            self.addEventListener('fetch', e => e.respondWith(caches.match(e.request).then(r => r || fetch(e.request))));
        `;
        const swBlob = new Blob([swCode], {type: 'application/javascript'});
        const swUrl = URL.createObjectURL(swBlob);

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register(swUrl, {scope: './'}).catch(console.error);
        }

        // Installation Logic
        let deferredPrompt;
        const installBtn = document.getElementById('install-btn');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.style.display = 'block';
        });

        installBtn.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                deferredPrompt = null;
                installBtn.style.display = 'none';
            }
        });

        // Progress Logic
        const targetUrl = "https://coachchriscrc.carrd.co";
        const progressBar = document.getElementById('progress-bar');
        const statusText = document.getElementById('status-text');
        const phases = ["Optimizing Vitals", "Loading Protocol", "Calibrating Strength", "Final Adjustment", "Ready"];
        let width = 0;
        
        function updateProgress() {
            width += Math.random() * 4.5;
            if (width >= 100) {
                width = 100;
                progressBar.style.width = '100%';
                statusText.innerText = "Execute";
                statusText.style.color = "#808a5c";
                // Delay redirect to allow for "Install" interaction if prompted
                setTimeout(() => { window.location.replace(targetUrl); }, 800); 
            } else {
                progressBar.style.width = width + '%';
                const phaseIndex = Math.floor((width / 100) * phases.length);
                statusText.innerText = `${phases[phaseIndex]} // ${Math.floor(width)}%`;
                setTimeout(() => { requestAnimationFrame(updateProgress); }, 30); 
            }
        }

        window.onload = () => setTimeout(updateProgress, 600);
    </script>
</body>
</html>

